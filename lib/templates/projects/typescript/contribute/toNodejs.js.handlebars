const { readFileSync, writeFileSync } = require("fs");

const version = readFileSync("./contribute/VERSION", { encoding: "utf-8" });
const package = JSON.parse(readFileSync("./package.json", { encoding: "utf-8" }));

package.description = "{{description}}";
delete package.main;
delete package.browser;

package.name = "{{name}}"
package.main = "dist-nodejs/index.nodejs.js";
package.version = version;
package.files = [
  "dist-nodejs/**/*",
  "lib/**/*",
  "bin/*"
];

writeFileSync("./package.json", JSON.stringify(package, undefined, 2), { encoding: "utf-8" });